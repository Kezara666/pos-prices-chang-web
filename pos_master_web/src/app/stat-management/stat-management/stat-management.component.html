<div class="p-6 bg-[var(--surface-ground)] min-h-screen">
  <!-- Dashboard Header -->
  <h1 class="text-3xl font-bold text-[var(--p-primary-500)] mb-6">ðŸ“Š Sales Dashboard</h1>

  <!-- Stats Cards -->
  <div class="grid grid-cols-1 gap-6 mb-6 md:grid-cols-2 lg:grid-cols-4">
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-[var(--primary-color)]">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Total Sales</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">Rs.{{totalSales | number:'1.2-2'}}</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-[var(--primary-color)]">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Total Orders</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">{{totalOrders}}</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-[var(--primary-color)]">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Customers</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">{{totalCustomers}}</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-[var(--primary-color)]">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Avg Order Value</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">Rs.{{averageOrderValue | number:'1.2-2'}}</p>
    </div>
  </div>

  <!-- Additional Stats Row -->
  <div class="grid grid-cols-1 gap-6 mb-6 md:grid-cols-2 lg:grid-cols-4">
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-green-500">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">This Month Sales</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">Rs.{{monthlySales | number:'1.2-2'}}</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-blue-500">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Conversion Rate</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">{{(totalCustomers > 0 ? (totalOrders / totalCustomers * 100) : 0) | number:'1.1-1'}}%</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-yellow-500">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Total Profit</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">Rs.{{totalProfit | number:'1.2-2'}}</p>
    </div>
    <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-md border-l-4 border-purple-500">
      <h2 class="text-sm uppercase text-[var(--text-color-secondary)] tracking-wider">Profit Margin</h2>
      <p class="text-2xl font-semibold text-[var(--text-color)] mt-2">{{profitMargin | number:'1.1-1'}}%</p>
    </div>
  </div>

  <!-- Line Chart - Sales Overview -->
  <div class="p-6 mb-6 bg-white rounded-lg shadow-md dark:bg-gray-800">
    <div class="flex justify-between items-center mb-4">
      <h2 class="text-xl font-semibold text-[var(--p-primary-500)]">
        {{chartViewMode === 'currentMonth' ? 'Current Month Sales' : 
          chartViewMode === 'monthly' ? 'Monthly Sales Trend' : 'All Time Sales'}}
      </h2>
      <div class="flex gap-2">
        <button 
          (click)="setChartView('currentMonth')"
          [class]="'px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-200 ' + 
                   (chartViewMode === 'currentMonth' ? 'bg-[var(--primary-color)] text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300')">
          Current Month
        </button>
        <button 
          (click)="setChartView('monthly')"
          [class]="'px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-200 ' + 
                   (chartViewMode === 'monthly' ? 'bg-[var(--primary-color)] text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300')">
          Monthly
        </button>
        <button 
          (click)="setChartView('allTime')"
          [class]="'px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-200 ' + 
                   (chartViewMode === 'allTime' ? 'bg-[var(--primary-color)] text-white' : 'bg-gray-200 text-gray-700 hover:bg-gray-300')">
          All Time
        </button>
      </div>
    </div>
    <div>
      <p-chart type="line" [data]="basicData" [options]="chartOptions"></p-chart>
    </div>
  </div>

  <!-- Bar + Pie Charts -->
  <div class="grid grid-cols-1 gap-6 mb-6 lg:grid-cols-2">
    <!-- Bar Chart - Product Sales Distribution -->
    <div class="p-6 bg-white rounded-lg shadow-md dark:bg-gray-800">
      <h2 class="text-xl font-semibold text-[var(--p-primary-500)] mb-4">Product Sales Distribution</h2>
      <div>
        <p-chart type="bar" [data]="barData" [options]="chartOptions"></p-chart>
      </div>
    </div>

    <!-- Pie Chart - Category Breakdown -->
    <div class="p-6 bg-white rounded-lg shadow-md dark:bg-gray-800">
      <h2 class="text-xl font-semibold text-[var(--p-primary-500)] mb-4">Category Breakdown</h2>
      <div class="flex flex-col items-center justify-center h-full min-h-[300px]">
        <div *ngIf="pieData && pieData.labels && pieData.labels.length > 0" class="w-full max-w-sm">
          <p-chart type="pie" [data]="pieData" [options]="pieChartOptions" styleClass="w-full"></p-chart>
        </div>
        <div *ngIf="!pieData || !pieData.labels || pieData.labels.length === 0" 
             class="flex flex-col items-center justify-center h-64 text-[var(--text-color-secondary)]">
          <div class="text-6xl mb-4">ðŸ“Š</div>
          <p class="text-lg font-medium">No Category Data</p>
          <p class="text-sm text-center">No sales data available to display category breakdown</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Top Products Table -->
  <div class="p-6 bg-white rounded-lg shadow-md dark:bg-gray-800">
    <h2 class="text-xl font-semibold text-[var(--p-primary-500)] mb-4">Top Products</h2>
    <div class="overflow-x-auto">
      <table class="min-w-full text-left table-auto">
        <thead>
          <tr class="bg-[var(--surface-card)]">
            <th class="px-4 py-2 text-[var(--text-color-secondary)]">Rank</th>
            <th class="px-4 py-2 text-[var(--text-color-secondary)]">Product</th>
            <th class="px-4 py-2 text-[var(--text-color-secondary)]">Units Sold</th>
            <th class="px-4 py-2 text-[var(--text-color-secondary)]">Revenue</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let product of topProducts; let i = index" 
              class="border-b border-[var(--surface-border)] hover:bg-[var(--surface-hover)]">
            <td class="px-4 py-2 text-[var(--text-color)]">
              <span class="inline-flex items-center justify-center w-6 h-6 text-xs font-bold text-white bg-[var(--primary-color)] rounded-full">
                {{i + 1}}
              </span>
            </td>
            <td class="px-4 py-2 text-[var(--text-color)] font-medium">{{product.name}}</td>
            <td class="px-4 py-2 text-[var(--text-color)]">{{product.unitsSold}}</td>
            <td class="px-4 py-2 text-[var(--text-color)]">Rs.{{product.revenue | number:'1.2-2'}}</td>
          </tr>
          <tr *ngIf="topProducts.length === 0" class="border-b border-[var(--surface-border)]">
            <td colspan="4" class="px-4 py-8 text-center text-[var(--text-color-secondary)]">
              No sales data available
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>